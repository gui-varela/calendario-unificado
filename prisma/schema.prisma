// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email       String       @unique
  username    String       @unique
  password    String
  perfil      Perfil       @relation(fields: [perfilId], references: [id])
  perfilId    String       @unique @db.Uuid
  disciplinas Disciplina[]
  sessions    Session[]
}

model Session {
  sessionId String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token     String
  usuario   Usuario @relation(fields: [usuarioId], references: [id])
  usuarioId String  @unique @db.Uuid
}

model Perfil {
  id      String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  codigo  String
  nome    String
  usuario Usuario?
}

model Disciplina {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title            String
  usuarioCriador   Usuario        @relation(fields: [usuarioCriadorId], references: [id])
  usuarioCriadorId String         @unique @db.Uuid
  Prova            Prova[]
  CursoAfetado     CursoAfetado[]
}

model Prova {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome         String
  data         DateTime
  disciplina   Disciplina @relation(fields: [disciplinaId], references: [id])
  disciplinaId String     @unique @db.Uuid
}

model Curso {
  id           String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome         String
  cursoAfetado CursoAfetado[]
}

model CursoAfetado {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  curso        Curso      @relation(fields: [cursoId], references: [id])
  cursoId      String     @unique @db.Uuid
  disciplina   Disciplina @relation(fields: [disciplinaId], references: [id])
  disciplinaId String     @unique @db.Uuid
}
